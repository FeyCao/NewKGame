<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>KGame趋势突击</title>
    <link rel="icon" type="image/GIF" href="res/favicon.ico"/>

    <meta name="viewport"
        content="width=device-width,user-scalable=no,initial-scale=1, minimum-scale=1,maximum-scale=1,target-densitydpi=device-dpi"/>

    <!--https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html-->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">

    <!-- force webkit on 360 -->
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <!-- force edge on IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="msapplication-tap-highlight" content="no">

    <!-- force full screen on some browser -->
    <meta name="full-screen" content="yes"/>
    <meta name="x5-fullscreen" content="true"/>
    <meta name="360-fullscreen" content="true"/>

    <!-- force screen orientation on some browser -->
    <!-- <meta name="screen-orientation" content="portrait"/>
    <meta name="x5-orientation" content="portrait"> -->

    <meta name="browsermode" content="application">
    <meta name="x5-page-mode" content="app">

<style type="text/css">
html {
  -ms-touch-action: none;
}

body, canvas, div {
  margin: 0;
  padding: 0;
  outline: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  -ms-user-select: none;
  -khtml-user-select: none;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

body {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  padding: 0;
  border: 0;
  margin: 0;

  cursor: default;
  color: #888;
  background-color: #0F6094;

  text-align: center;
  font-family: Helvetica, Verdana, Arial, sans-serif;

  display: flex;
  flex-direction: column;
}
#game{
    height: 100vmin;
    width:100vmax;
    transform:rotate(90deg);
    transform-origin: 50vw 50%;
}
</style>

</head>
<body>

<script>
    // window.location.search(设置或获取 href 属性中跟在问号后面的部分)
    var newUrl =window.location.search;
    console.info(newUrl);
    function getQueryString()
    {
        var result = location.search.match(new RegExp("[\?\&][^\?\&]+=[^\?\&]+","g"));
        for(var i = 0; i < result.length; i++)
        {
            result[i] = result[i].substring(1);
        }
        return result;
    }

    //根据QueryString参数名称获取值
    function getQueryStringByName(name)
    {
        var result = location.search.match(new RegExp("[\?\&]" + name+ "=([^\&]+)","i"));
        if(result == null || result.length < 1)
        {
            return "";
        }
        return result[1];
    }

    //根据QueryString参数索引获取值
    function getQueryStringByIndex(index)
    {
        if(index == null)
        {
            return "";
        }

        var queryStringList = getQueryString();
        if (index >= queryStringList.length)
        {
            return "";
        }

        var result = queryStringList[index];
        var startIndex = result.indexOf("=") + 1;
        result = result.substring(startIndex);
        return result;
    }
    var nav = window.navigator;
    var ua = nav.userAgent.toLowerCase();
    var iOS = ( ua.match(/(iPad|iPhone|iPod)/i) ? true : false );
    var isAndroid = ua.match(/android/i) || nav.platform.match(/android/i) ? true : false;
    var isWeChat = ua.match(/MicroMessenger/i) == 'micromessenger'? true : false;
    //屏幕方向标识，0横屏，其他值竖屏
    //    var orientation=0;
    //转屏事件，内部功能可以自定义
    function screenOrientationEvent(){
        var isMobile = ua.indexOf('mobile') !== -1 || ua.indexOf('android') !== -1;
        if(!isMobile||iOS){window.location.href="share.html"+window.location.search; return;}
        if(window.innerHeight < window.innerWidth){
            console.info("================横");
            window.location.href="share.html"+window.location.search;
        }
        else {
            console.info("===================竖");
        }
    }
    var innerWidthTmp = window.innerWidth;
    //横竖屏事件监听方法
    function screenOrientationListener(){
        try{
            var iw = window.innerWidth;
//屏幕方向改变处理
            if(iw != innerWidthTmp){
//                   if(iw<window.innerHeight)orientation = 90;
//                   else orientation = 0;
//调用转屏事件
                screenOrientationEvent();
                innerWidthTmp = iw;
            }
        } catch(e){alert(e);};
//间隔固定事件检查是否转屏，默认500毫秒
        setTimeout("screenOrientationListener()",500);
    }
    screenOrientationEvent();
    //启动横竖屏事件监听
    screenOrientationListener();
    //屏幕方向标识，0横屏，其他值竖屏
</script>
    <iframe id="game" src="share.html"></iframe>
</body>
</html>